<Page xmlns="http://schemas.nativescript.org/tns.xsd" loaded="pageLoaded" class="page"
  xmlns:ui="nativescript-skygear-sdk">
  <StackLayout class="p-20">
    <StackLayout>
      <Label text="{{ message }}" class="t-20 text-center c-black" textWrap="true"/>
      <Button text="Get User" tap="{{login}}" class="btn btn-primary btn-active" />
      <Button text="Get Todos" tap="{{getTodos}}" class="btn btn-primary btn-active" />
      <Button text="Get First Todo" tap="{{getFirstTodo}}" class="btn btn-primary btn-active" />
      <Button text="Subscribe Pubsub" tap="{{pubsubStuff}}" class="btn btn-primary btn-active" />
    </StackLayout>
    <StackLayout columns="2">
      <Label row="0" column="1" text="{{todos ? 'todos: ' + todos.length : 'todos: 0'}}"/>
      <Label row="0" column="2" text="{{'users: ' + users.length}}"/>
    </StackLayout>
    <Label text="Users" class="t-20 text-center c-black" backgroundColor="gray" textWrap="true"/>
    <ScrollView>
    <ListView
    items="{{ users }}"
    itemTap="{{getUser}}"
    separatorColor="orangered" minHeight="55" rowHeight="50"
    class="list-group" id="listView" row="1">
      <ListView.itemTemplate>
        <StackLayout class="list-group-item">
          <Label text="{{'start a conversation with ' + username}}" textWrap="true" class="title" height="50" color="white" backgroundColor="red" />
        </StackLayout>
      </ListView.itemTemplate>
    </ListView>
  </ScrollView>
  </StackLayout>
</Page>